#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Check documentation completeness
echo "ğŸ“ Validating documentation..."
npm run docs:validate

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Documentation validation failed!"
  echo "ğŸ’¡ Please ensure all components/hooks/stores have corresponding .md files"
  echo "ğŸ“– See .cursor/rules/documentation-rules.mdc for template"
  exit 1
fi

# Type check
echo "ğŸ” Running TypeScript type check..."
npm run type-check

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ TypeScript type check failed!"
  exit 1
fi

# Lint staged files
echo "âœ¨ Linting staged files..."
npx lint-staged

echo "âœ… Pre-commit checks passed!"
