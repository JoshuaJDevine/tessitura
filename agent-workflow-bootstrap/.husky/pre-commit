#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Validate branch name (skip for main branches)
BRANCH=$(git branch --show-current)
if [[ "$BRANCH" != "main" && "$BRANCH" != "master" && "$BRANCH" != "develop" ]]; then
  node scripts/validate-branch-name.js || exit 1
fi

# Run lint-staged for formatting and linting
npx lint-staged || exit 1

# Type check
npm run type-check || exit 1

echo "âœ… Pre-commit checks passed"
